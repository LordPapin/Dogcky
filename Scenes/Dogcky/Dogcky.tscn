[gd_scene load_steps=7 format=2]

[ext_resource path="res://Assets/Dogcky/Dogcky 3.png" type="Texture" id=1]
[ext_resource path="res://Assets/Dogcky/Dogcky 2.png" type="Texture" id=2]
[ext_resource path="res://Assets/Dogcky/Dogcky 1.png" type="Texture" id=3]

[sub_resource type="GDScript" id=6]
script/source = "extends KinematicBody2D

var poop = preload(\"res://Scenes/objetos/poop.tscn\")
const VALOR_DE_VELOCIDAD = 15
const VELOCIDAD_MAXIMA   = 150
const GRAVITY = 10
const MAX_JUMPS = 1
var velocity = Vector2(0,-1)
onready var sprite = $AnimatedSprite
var jumps = 0

# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.

func _generate_poop():
	var instancia_poop = poop.instance()
	get_parent().add_child(instancia_poop)
	
	pass

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _physics_process(delta):
	if is_on_floor() and jumps == 1:
		jumps = 0
		velocity.y = 0
		sprite.play(\"quieto\")

	else:
		velocity.y += GRAVITY
		
	if Input.is_action_just_pressed(\"ui_accept\") and jumps < MAX_JUMPS:
		jumps += 1
		velocity.y = -25 * VALOR_DE_VELOCIDAD
		sprite.play(\"saltar\")

	if Input.is_action_just_pressed(\"skill\"):
		var instancia_poop = poop.instance()
		get_parent().add_child(instancia_poop)
#		instancia_poop.set_global_pos(Vector2(self.get_global_pos().x , self.get_global_pos().y ))

	if Input.is_action_just_pressed(\"ui_left\"):
		velocity.x = -VELOCIDAD_MAXIMA
		sprite.play(\"caminar\")
		$AnimatedSprite.flip_h = false
		

	if Input.is_action_just_pressed(\"ui_right\"):
		velocity.x = VELOCIDAD_MAXIMA
		sprite.play(\"caminar\")
		$AnimatedSprite.flip_h = true

	if Input.is_action_just_released(\"ui_left\") or Input.is_action_just_released(\"ui_right\") or Input.is_action_just_released(\"ui_down\"):
		velocity.x = 0
		sprite.play(\"quieto\")



	move_and_slide(velocity,Vector2.UP)
	
	var minimo = get_tree().get_nodes_in_group(\"min\")[0].global_position
	var maximo = get_tree().get_nodes_in_group(\"max\")[0].global_position
	
	if(global_position.x < minimo.x):
		global_position.x = minimo.x + 5
	elif(global_position.x > maximo.x):
		global_position.x = maximo.x - 5
		
	if(global_position.y > maximo.y):
		global_position.y = maximo.y + 5
	elif(global_position.y < minimo.y):
		global_position.y = minimo.y - 5




"

[sub_resource type="SpriteFrames" id=7]
animations = [ {
"frames": [ ExtResource( 1 ), ExtResource( 2 ) ],
"loop": true,
"name": "caminar",
"speed": 5.0
}, {
"frames": [ ExtResource( 3 ) ],
"loop": true,
"name": "quieto",
"speed": 5.0
}, {
"frames": [ ExtResource( 2 ) ],
"loop": true,
"name": "saltar",
"speed": 5.0
} ]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 31, 18.5 )

[node name="Dogcky" type="KinematicBody2D"]
input_pickable = true
script = SubResource( 6 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
position = Vector2( -7.125, 10.75 )
scale = Vector2( 0.123757, 0.11375 )
frames = SubResource( 7 )
animation = "caminar"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2( -7, 14.5 )
shape = SubResource( 1 )
